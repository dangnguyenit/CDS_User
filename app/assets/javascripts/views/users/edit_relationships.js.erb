var EditRelationships = {
	/**
  * Create radio for each template, which content template's id
  *
  * @author DangNH <dangnh@elarion.com>
  * @param {object} [obj] - Department object
  * @returns None
  * @deprecated since version 2.0
  * @todo improve this function.
  */
	renderRadio : function(obj) {
		return "<input type='radio' class='radio_select_manager' name='manager_id' value='" + obj.id + "' /> "
	},

	/**
  * Set value for text fields
  *
  * @author DangNH <dangnh@elarion.com>
  * @param {object} [obj] - Department object
  * @returns None
  * @deprecated since version 2.0
  * @todo improve this function.
  */
	set_manager_for_user : function() {
		
		if($(".radio_select_manager").is(":checked")) {
			edit_relationship_modal.modal('hide')
			if($("#edit_realtionship #user_id")[0].value != "") {
			UserRelationships.assign_manager_for_users(g_token)

			}
			else {
				id = $("#edit_realtionship .radio_select_manager:checked").val()
				name = $("#edit_realtionship .radio_select_manager:checked")[0].parentNode.parentNode.children[1].innerText

				// Set values
				$("#new_user_relationship_modal #manager_name")[0].value = name
				$("#new_user_relationship_modal #manager_id")[0].value = id
				new_relationship_modal.modal('show')
			}
			
		}
		else {
			if(user_notify) {
        user_notify.close()
      }
      user_notify = notyfy({
        text: "<b> Please select a manager <b>",
        type: "error"
      })
		}
		
	}
}

var tb_manager
$(document).ready(function() {
	/**
  * Initialize datatable content list of templates
  *
  * @author DangNH <dangnh@elarion.com>
  * @returns None
  * @deprecated since version 2.0
  * @todo improve this function.
  */
  if($("#edit_relationship_table").length > 0){
  	tb_manager = $("#edit_relationship_table").dataTable({
  		"sDom": "<'row separator bottom'<'col-md-12'f>r>t<'row'<'col-md-6'i><'col-md-6'p>>",
	    "bJQueryUI":true,
	    "bFilter": true,
	    "bLengthChange": false,
	    "bInfo": false,
	    "bProcessing": true,
	    "bServerSide": true,
	    "sPaginationType": "bootstrap",
	    "iDisplayLength": g_displayLength,
	    "aaSorting": [[ 1, "asc" ]],
	    "aoColumns": [
	      { "sTitle": "",
	        "sClass": "center",
	        "sWidth": "1%",
	        "bSortable": false,
	        "mData" : EditRelationships.renderRadio
	      },
	      { "sTitle": I18n.t('departments.select_managers.j_full_name'),
	        "mData" : "full_name"
	      },
	      { "sTitle": I18n.t('departments.select_managers.j_email'),
	        "mData" : "email"
	      },
	      { "sTitle": I18n.t('departments.select_managers.j_role'),
	        "mData" : "role"
	      },
	    ],
	    "sAjaxSource": g_usersPath,
	    "fnInitComplete": function () {
	      $('div.dataTables_filter input').focus();
	    },
	    "fnDrawCallback": function() {
	    	CDS.fnInitCompleteCallback(this);
	      $('div.dataTables_filter input').focus();
	      if(edit_user_element) {
	      	UserRelationships.disable_edit_user(edit_user_element)
	      }
	      else {
	      	selected_users = $("[name='user_relationship_id']")
	      	UserRelationships.disable_selected_user(selected_users)
	      }
	      

	    }
	  });
  }
})